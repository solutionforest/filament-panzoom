(function(){typeof window>"u"||(window.interactiveImage=function(l,r,g=3){return{imageUrl:l,imageId:r,scale:1,panX:0,panY:0,originX:0,originY:0,isPanning:!1,lastPanX:0,lastPanY:0,imageLoaded:!1,containerBounds:null,imageBounds:null,minScale:.1,maxScale:5,doubleClickZoomLevel:g,init(){this.$nextTick(()=>{this.updateBounds()}),window.addEventListener("resize",()=>{this.updateBounds()})},onImageLoad(){this.imageLoaded=!0,this.updateBounds(),this.fitToContainer()},updateBounds(){this.$refs.container&&this.$refs.image&&(this.containerBounds=this.$refs.container.getBoundingClientRect(),this.imageBounds=this.$refs.image.getBoundingClientRect())},fitToContainer(){if(!this.imageLoaded||!this.$refs.container||!this.$refs.image)return;let t=this.$refs.container,i=this.$refs.image,n=t.offsetWidth,a=t.offsetHeight,h=i.naturalWidth,e=i.naturalHeight,s=n/h,c=a/e;this.scale=Math.min(s,c,1),this.panX=0,this.panY=0,this.$nextTick(()=>{this.updateBounds()})},startPan(t){t.target===this.$refs.image&&(t.preventDefault(),this.isPanning=!0,this.lastPanX=t.clientX,this.lastPanY=t.clientY,this.$refs.image.style.cursor="grabbing")},pan(t){if(!this.isPanning)return;t.preventDefault();let i=t.clientX-this.lastPanX,n=t.clientY-this.lastPanY;this.panX+=i,this.panY+=n,this.constrainPan(),this.lastPanX=t.clientX,this.lastPanY=t.clientY},endPan(){this.isPanning&&(this.isPanning=!1,this.$refs.image&&(this.$refs.image.style.cursor="grab"))},doubleClickZoom(t){if(t.target!==this.$refs.image)return;t.preventDefault();let i=this.$refs.container.getBoundingClientRect(),n=t.clientX-i.left,a=t.clientY-i.top,h=this.$refs.image.getBoundingClientRect(),e=(n-this.panX)/this.scale,s=(a-this.panY)/this.scale;if(this.scale<=1){let c=Math.min(this.maxScale,this.doubleClickZoomLevel),o=c-this.scale,f=n-e*c,u=a-s*c;this.panX=f,this.panY=u,this.scale=c}else this.fitToContainer();this.constrainPan()},zoom(t){t.preventDefault();let i=this.$refs.container.getBoundingClientRect(),n=t.clientX-i.left,a=t.clientY-i.top,h=t.deltaY>0?-.1:.1,e=Math.max(this.minScale,Math.min(this.maxScale,this.scale+h));if(e!==this.scale){let s=e-this.scale,c=i.width/2,o=i.height/2;this.panX-=(n-c)*s,this.panY-=(a-o)*s,this.scale=e,this.constrainPan()}},zoomIn(){let t=Math.min(this.maxScale,this.scale+.2);this.scale=t,this.constrainPan()},zoomOut(){let t=Math.max(this.minScale,this.scale-.2);this.scale=t,this.constrainPan()},reset(){this.fitToContainer()},constrainPan(){if(!this.$refs.container||!this.$refs.image)return;let t=this.$refs.container,i=this.$refs.image.naturalWidth*this.scale,n=this.$refs.image.naturalHeight*this.scale,a=t.offsetWidth,h=t.offsetHeight,e=Math.max(0,(i-a)/2),s=Math.max(0,(n-h)/2);this.panX=Math.max(-e,Math.min(e,this.panX)),this.panY=Math.max(-s,Math.min(s,this.panY))},startTouch(t){t.target===this.$refs.image&&t.touches.length===1&&(t.preventDefault(),this.startPan({target:t.target,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}))},touch(t){t.touches.length===1&&this.isPanning&&(t.preventDefault(),this.pan({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}))},endTouch(){this.endPan()}}})})();
