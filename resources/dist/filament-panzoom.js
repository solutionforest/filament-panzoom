(function(){typeof window>"u"||(window.interactiveImage=function(f,d,g=3){return{imageUrl:f,imageId:d,scale:1,panX:0,panY:0,fittedScale:1,fittedPanX:0,fittedPanY:0,originX:0,originY:0,isPanning:!1,lastPanX:0,lastPanY:0,imageLoaded:!1,containerBounds:null,imageBounds:null,minScale:.1,maxScale:5,doubleClickZoomLevel:g,init(){this.$nextTick(()=>{this.updateBounds()}),window.addEventListener("resize",()=>{this.updateBounds()})},onImageLoad(){this.imageLoaded=!0,this.updateBounds(),this.fitToContainer()},updateBounds(){this.$refs.container&&this.$refs.image&&(this.containerBounds=this.$refs.container.getBoundingClientRect(),this.imageBounds=this.$refs.image.getBoundingClientRect())},fitToContainer(){if(!this.imageLoaded||!this.$refs.container||!this.$refs.image)return;let t=this.$refs.container,n=this.$refs.image,s=t.offsetWidth,i=t.offsetHeight,e=n.naturalWidth,a=n.naturalHeight,c=s/e,o=i/a,h=Math.min(c,o,1),l=(s-e*h)/2,r=(i-a*h)/2;this.scale=h,this.panX=l,this.panY=r,this.fittedScale=h,this.fittedPanX=l,this.fittedPanY=r,this.$nextTick(()=>{this.updateBounds()})},startPan(t){t.target===this.$refs.image&&(t.preventDefault(),this.isPanning=!0,this.lastPanX=t.clientX,this.lastPanY=t.clientY,this.$refs.image.style.cursor="grabbing")},pan(t){if(!this.isPanning)return;t.preventDefault();let n=t.clientX-this.lastPanX,s=t.clientY-this.lastPanY;this.panX+=n,this.panY+=s,this.constrainPan(),this.lastPanX=t.clientX,this.lastPanY=t.clientY},endPan(){this.isPanning&&(this.isPanning=!1,this.$refs.image&&(this.$refs.image.style.cursor="grab"))},doubleClickZoom(t){if(t.target!==this.$refs.image)return;t.preventDefault();let n=this.$refs.container.getBoundingClientRect(),s=t.clientX-n.left,i=t.clientY-n.top,e=(c,o,h=.01)=>Math.abs(c-o)<=h;if(e(this.scale,this.fittedScale)&&e(this.panX,this.fittedPanX,1)&&e(this.panY,this.fittedPanY,1)){let c=Math.min(this.maxScale,this.doubleClickZoomLevel),o=(s-this.panX)/this.scale,h=(i-this.panY)/this.scale,l=s-o*c,r=i-h*c;this.scale=c,this.panX=l,this.panY=r}else this.scale=this.fittedScale,this.panX=this.fittedPanX,this.panY=this.fittedPanY;this.constrainPan()},zoom(t){t.preventDefault();let n=this.$refs.container.getBoundingClientRect(),s=t.clientX-n.left,i=t.clientY-n.top,e=t.deltaY>0?-.1:.1,a=Math.max(this.minScale,Math.min(this.maxScale,this.scale+e));if(a!==this.scale){let c=(s-this.panX)/this.scale,o=(i-this.panY)/this.scale;this.scale=a,this.panX=s-c*a,this.panY=i-o*a,this.constrainPan()}},zoomIn(){let t=this.$refs.container.getBoundingClientRect(),n=t.width/2,s=t.height/2,i=Math.min(this.maxScale,this.scale+.2);if(i!==this.scale){let e=(n-this.panX)/this.scale,a=(s-this.panY)/this.scale;this.scale=i,this.panX=n-e*i,this.panY=s-a*i,this.constrainPan()}},zoomOut(){let t=this.$refs.container.getBoundingClientRect(),n=t.width/2,s=t.height/2,i=Math.max(this.minScale,this.scale-.2);if(i!==this.scale){let e=(n-this.panX)/this.scale,a=(s-this.panY)/this.scale;this.scale=i,this.panX=n-e*i,this.panY=s-a*i,this.constrainPan()}},reset(){this.fitToContainer()},constrainPan(){if(!this.$refs.container||!this.$refs.image)return;let t=this.$refs.container,n=this.$refs.image.naturalWidth*this.scale,s=this.$refs.image.naturalHeight*this.scale,i=t.offsetWidth,e=t.offsetHeight;if(n<=i)this.panX=(i-n)/2;else{let a=i-n,c=0;this.panX=Math.max(a,Math.min(c,this.panX))}if(s<=e)this.panY=(e-s)/2;else{let a=e-s,c=0;this.panY=Math.max(a,Math.min(c,this.panY))}},startTouch(t){t.target===this.$refs.image&&t.touches.length===1&&(t.preventDefault(),this.startPan({target:t.target,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}))},touch(t){t.touches.length===1&&this.isPanning&&(t.preventDefault(),this.pan({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}))},endTouch(){this.endPan()}}})})();
