(function(){typeof window>"u"||(window.interactiveImage=function(o,r){return{imageUrl:o,imageId:r,scale:1,panX:0,panY:0,originX:0,originY:0,isPanning:!1,lastPanX:0,lastPanY:0,imageLoaded:!1,containerBounds:null,imageBounds:null,minScale:.1,maxScale:5,init(){this.$nextTick(()=>{this.updateBounds()}),window.addEventListener("resize",()=>{this.updateBounds()})},onImageLoad(){this.imageLoaded=!0,this.updateBounds(),this.fitToContainer()},updateBounds(){this.$refs.container&&this.$refs.image&&(this.containerBounds=this.$refs.container.getBoundingClientRect(),this.imageBounds=this.$refs.image.getBoundingClientRect())},fitToContainer(){if(!this.imageLoaded||!this.$refs.container||!this.$refs.image)return;let t=this.$refs.container,i=this.$refs.image,e=t.offsetWidth,a=t.offsetHeight,h=i.naturalWidth,n=i.naturalHeight,s=e/h,c=a/n;this.scale=Math.min(s,c,1),this.panX=0,this.panY=0,this.$nextTick(()=>{this.updateBounds()})},startPan(t){t.target===this.$refs.image&&(t.preventDefault(),this.isPanning=!0,this.lastPanX=t.clientX,this.lastPanY=t.clientY,this.$refs.image.style.cursor="grabbing")},pan(t){if(!this.isPanning)return;t.preventDefault();let i=t.clientX-this.lastPanX,e=t.clientY-this.lastPanY;this.panX+=i,this.panY+=e,this.constrainPan(),this.lastPanX=t.clientX,this.lastPanY=t.clientY},endPan(){this.isPanning&&(this.isPanning=!1,this.$refs.image&&(this.$refs.image.style.cursor="grab"))},zoom(t){t.preventDefault();let i=this.$refs.container.getBoundingClientRect(),e=t.clientX-i.left,a=t.clientY-i.top,h=t.deltaY>0?-.1:.1,n=Math.max(this.minScale,Math.min(this.maxScale,this.scale+h));if(n!==this.scale){let s=n-this.scale,c=i.width/2,l=i.height/2;this.panX-=(e-c)*s,this.panY-=(a-l)*s,this.scale=n,this.constrainPan()}},zoomIn(){let t=Math.min(this.maxScale,this.scale+.2);this.scale=t,this.constrainPan()},zoomOut(){let t=Math.max(this.minScale,this.scale-.2);this.scale=t,this.constrainPan()},reset(){this.fitToContainer()},constrainPan(){if(!this.$refs.container||!this.$refs.image)return;let t=this.$refs.container,i=this.$refs.image.naturalWidth*this.scale,e=this.$refs.image.naturalHeight*this.scale,a=t.offsetWidth,h=t.offsetHeight,n=Math.max(0,(i-a)/2),s=Math.max(0,(e-h)/2);this.panX=Math.max(-n,Math.min(n,this.panX)),this.panY=Math.max(-s,Math.min(s,this.panY))},startTouch(t){t.target===this.$refs.image&&t.touches.length===1&&(t.preventDefault(),this.startPan({target:t.target,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}))},touch(t){t.touches.length===1&&this.isPanning&&(t.preventDefault(),this.pan({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}))},endTouch(){this.endPan()}}})})();
